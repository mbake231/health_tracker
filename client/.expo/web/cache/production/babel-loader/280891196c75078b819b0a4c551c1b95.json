{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"theme\",\"horizontal\",\"initialPosition\",\"firstDay\",\"disablePan\",\"disableWeekScroll\",\"openThreshold\",\"closeThreshold\",\"onCalendarToggled\",\"closeOnDayPress\",\"onDayPress\",\"style\",\"calendarStyle\",\"allowShadow\",\"hideKnob\",\"hideArrows\",\"onPressArrowLeft\",\"onPressArrowRight\",\"renderArrow\",\"rightArrowImageSource\",\"leftArrowImageSource\",\"markedDates\",\"testID\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import first from'lodash/first';import values from'lodash/values';import isFunction from'lodash/isFunction';import isNumber from'lodash/isNumber';import throttle from'lodash/throttle';import PropTypes from'prop-types';import XDate from'xdate';import React,{useContext,useRef,useState,useEffect,useCallback,useMemo}from'react';import AccessibilityInfo from\"react-native-web/dist/exports/AccessibilityInfo\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import Animated from\"react-native-web/dist/exports/Animated\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import{CALENDAR_KNOB}from\"../testIDs\";import{page}from\"../dateutils\";import{parseDate,toMarkingFormat}from\"../interface\";import styleConstructor,{HEADER_HEIGHT,KNOB_CONTAINER_HEIGHT}from\"./style\";import WeekDaysNames from\"../commons/WeekDaysNames\";import Calendar from\"../calendar\";import CalendarList from\"../calendar-list\";import Week from\"./week\";import WeekCalendar from\"./WeekCalendar\";import Context from\"./Context\";import constants from\"../commons/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var commons=require(\"./commons\");var updateSources=commons.UpdateSources;var Positions;(function(Positions){Positions[\"CLOSED\"]=\"closed\";Positions[\"OPEN\"]=\"open\";})(Positions||(Positions={}));var SPEED=20;var BOUNCINESS=6;var CLOSED_HEIGHT=120;var WEEK_HEIGHT=46;var DAY_NAMES_PADDING=24;var PAN_GESTURE_THRESHOLD=30;var LEFT_ARROW=require(\"../calendar/img/previous.png\");var RIGHT_ARROW=require(\"../calendar/img/next.png\");var headerStyleOverride={stylesheet:{calendar:{header:{week:{marginTop:7,marginBottom:-4,flexDirection:'row',justifyContent:'space-around'}}}}};var ExpandableCalendar=function ExpandableCalendar(props){var theme=props.theme,_props$horizontal=props.horizontal,horizontal=_props$horizontal===void 0?true:_props$horizontal,_props$initialPositio=props.initialPosition,initialPosition=_props$initialPositio===void 0?Positions.CLOSED:_props$initialPositio,_props$firstDay=props.firstDay,firstDay=_props$firstDay===void 0?0:_props$firstDay,disablePan=props.disablePan,disableWeekScroll=props.disableWeekScroll,_props$openThreshold=props.openThreshold,openThreshold=_props$openThreshold===void 0?PAN_GESTURE_THRESHOLD:_props$openThreshold,_props$closeThreshold=props.closeThreshold,closeThreshold=_props$closeThreshold===void 0?PAN_GESTURE_THRESHOLD:_props$closeThreshold,onCalendarToggled=props.onCalendarToggled,_props$closeOnDayPres=props.closeOnDayPress,closeOnDayPress=_props$closeOnDayPres===void 0?true:_props$closeOnDayPres,onDayPress=props.onDayPress,propsStyle=props.style,calendarStyle=props.calendarStyle,_props$allowShadow=props.allowShadow,allowShadow=_props$allowShadow===void 0?true:_props$allowShadow,hideKnob=props.hideKnob,hideArrows=props.hideArrows,onPressArrowLeft=props.onPressArrowLeft,onPressArrowRight=props.onPressArrowRight,renderArrow=props.renderArrow,_props$rightArrowImag=props.rightArrowImageSource,rightArrowImageSource=_props$rightArrowImag===void 0?RIGHT_ARROW:_props$rightArrowImag,_props$leftArrowImage=props.leftArrowImageSource,leftArrowImageSource=_props$leftArrowImage===void 0?LEFT_ARROW:_props$leftArrowImage,markedDates=props.markedDates,testID=props.testID,others=_objectWithoutProperties(props,_excluded);var _useContext=useContext(Context),date=_useContext.date,setDate=_useContext.setDate;var initialDate=date;var getYear=function getYear(date){var d=new XDate(date);return d.getFullYear();};var getMonth=function getMonth(date){var d=new XDate(date);return d.getMonth()+1;};var visibleMonth=useRef(getMonth(date));var visibleYear=useRef(getYear(date));var isLaterDate=function isLaterDate(date1,date2){if(date1&&date2){if(date1.year>getYear(date2)){return true;}if(date1.year===getYear(date2)){if(date1.month>getMonth(date2)){return true;}}}return false;};var _markedDates=useMemo(function(){return _objectSpread(_objectSpread({},markedDates),{},_defineProperty({},date,{selected:true}));},[markedDates,date]);var getNumberOfWeeksInMonth=function getNumberOfWeeksInMonth(month){var days=page(parseDate(month),firstDay);return days.length/7;};var numberOfWeeks=useRef(getNumberOfWeeksInMonth(date));var closedHeight=CLOSED_HEIGHT+(hideKnob?0:KNOB_CONTAINER_HEIGHT);var getOpenHeight=function getOpenHeight(){if(!horizontal){return Math.max(constants.screenHeight,constants.screenWidth);}return CLOSED_HEIGHT+WEEK_HEIGHT*(numberOfWeeks.current-1)+(hideKnob?12:KNOB_CONTAINER_HEIGHT)+(constants.isAndroid?3:0);};var openHeight=useRef(getOpenHeight());var startHeight=initialPosition===Positions.CLOSED?closedHeight:openHeight.current;var _height=useRef(startHeight);var deltaY=useRef(new Animated.Value(startHeight));var headerDeltaY=useRef(new Animated.Value(initialPosition===Positions.CLOSED?0:-HEADER_HEIGHT));var _useState=useState(initialPosition||Positions.CLOSED),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),screenReaderEnabled=_useState4[0],setScreenReaderEnabled=_useState4[1];var isOpen=useMemo(function(){return position===Positions.OPEN;},[position]);var wrapper=useRef();var calendar=useRef();var header=useRef();var weekCalendar=useRef();var style=useRef(styleConstructor(theme));var themeObject=_extends(headerStyleOverride,theme);var _wrapperStyles=useRef({style:{height:startHeight}});var _headerStyles={style:{top:initialPosition===Positions.CLOSED?0:-HEADER_HEIGHT}};var _weekCalendarStyles={style:{opacity:isOpen?0:1}};var shouldHideArrows=!horizontal?true:hideArrows||false;var updateNativeStyles=function updateNativeStyles(){var _wrapper$current;wrapper==null?void 0:(_wrapper$current=wrapper.current)==null?void 0:_wrapper$current.setNativeProps(_wrapperStyles.current);if(!horizontal){var _header$current;header==null?void 0:(_header$current=header.current)==null?void 0:_header$current.setNativeProps(_headerStyles);}else{var _weekCalendar$current;weekCalendar==null?void 0:(_weekCalendar$current=weekCalendar.current)==null?void 0:_weekCalendar$current.setNativeProps(_weekCalendarStyles);}};var weekDaysStyle=useMemo(function(){var leftPaddings=calendarStyle==null?void 0:calendarStyle.paddingLeft;var rightPaddings=calendarStyle==null?void 0:calendarStyle.paddingRight;return[style.current.weekDayNames,{paddingLeft:isNumber(leftPaddings)?leftPaddings+6:DAY_NAMES_PADDING,paddingRight:isNumber(rightPaddings)?rightPaddings+6:DAY_NAMES_PADDING}];},[calendarStyle]);var headerStyle=useMemo(function(){return[style.current.header,{height:HEADER_HEIGHT+10,top:headerDeltaY.current}];},[headerDeltaY.current]);var weekCalendarStyle=useMemo(function(){return[style.current.weekContainer,isOpen?style.current.hidden:style.current.visible];},[isOpen]);var containerStyle=useMemo(function(){return[allowShadow&&style.current.containerShadow,propsStyle];},[allowShadow,propsStyle]);var wrapperStyle=useMemo(function(){return{height:deltaY.current};},[deltaY.current]);useEffect(function(){if(AccessibilityInfo){if(AccessibilityInfo.isScreenReaderEnabled){AccessibilityInfo.isScreenReaderEnabled().then(handleScreenReaderStatus);}else if(AccessibilityInfo.fetch){AccessibilityInfo.fetch().then(handleScreenReaderStatus);}}},[]);useEffect(function(){scrollToDate(date);},[date]);var handleScreenReaderStatus=function handleScreenReaderStatus(screenReaderEnabled){setScreenReaderEnabled(screenReaderEnabled);};var scrollToDate=function scrollToDate(date){if(!horizontal){var _calendar$current;calendar==null?void 0:(_calendar$current=calendar.current)==null?void 0:_calendar$current.scrollToDay(new XDate(date),0,true);}else if(getYear(date)!==visibleYear.current||getMonth(date)!==visibleMonth.current){var _calendar$current2;calendar==null?void 0:(_calendar$current2=calendar.current)==null?void 0:_calendar$current2.scrollToMonth(date);}};var scrollPage=function scrollPage(next){if(horizontal){var d=parseDate(date);if(isOpen){d.setDate(1);d.addMonths(next?1:-1);}else{var dayOfTheWeek=d.getDay();if(dayOfTheWeek<firstDay&&firstDay>0){dayOfTheWeek=7+dayOfTheWeek;}var firstDayOfWeek=(next?7:-7)-dayOfTheWeek+firstDay;d.addDays(firstDayOfWeek);}setDate==null?void 0:setDate(toMarkingFormat(d),updateSources.PAGE_SCROLL);}};var handleMoveShouldSetPanResponder=function handleMoveShouldSetPanResponder(_,gestureState){if(disablePan){return false;}if(!horizontal&&isOpen){return false;}if(position===Positions.CLOSED&&gestureState.dy<0){return false;}return gestureState.dy>5||gestureState.dy<-5;};var handlePanResponderMove=function handlePanResponderMove(_,gestureState){_wrapperStyles.current.style.height=Math.max(closedHeight,_height.current+gestureState.dy);if(!horizontal){_headerStyles.style.top=Math.min(Math.max(-gestureState.dy,-HEADER_HEIGHT),0);}else{if(position===Positions.CLOSED){_weekCalendarStyles.style.opacity=Math.min(1,Math.max(1-gestureState.dy/100,0));}}updateNativeStyles();};var handlePanResponderEnd=function handlePanResponderEnd(){_height.current=Number(_wrapperStyles.current.style.height);bounceToPosition();};var panResponder=PanResponder.create({onMoveShouldSetPanResponder:handleMoveShouldSetPanResponder,onPanResponderMove:handlePanResponderMove,onPanResponderRelease:handlePanResponderEnd,onPanResponderTerminate:handlePanResponderEnd});var bounceToPosition=function bounceToPosition(){var toValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!disablePan){var threshold=isOpen?openHeight.current-closeThreshold:closedHeight+openThreshold;var _isOpen=_height.current>=threshold;var newValue=_isOpen?openHeight.current:closedHeight;deltaY.current.setValue(_height.current);_height.current=toValue||newValue;_isOpen=_height.current>=threshold;Animated.spring(deltaY.current,{toValue:_height.current,speed:SPEED,bounciness:BOUNCINESS,useNativeDriver:false}).start();onCalendarToggled==null?void 0:onCalendarToggled(_isOpen);setPosition(function(){return _height.current===closedHeight?Positions.CLOSED:Positions.OPEN;});closeHeader(_isOpen);resetWeekCalendarOpacity(_isOpen);}};var resetWeekCalendarOpacity=function resetWeekCalendarOpacity(isOpen){_weekCalendarStyles.style.opacity=isOpen?0:1;updateNativeStyles();};var closeHeader=function closeHeader(isOpen){headerDeltaY.current.setValue(Number(_headerStyles.style.top));if(!horizontal&&!isOpen){Animated.spring(headerDeltaY.current,{toValue:0,speed:SPEED/10,bounciness:1,useNativeDriver:false}).start();}};var _onPressArrowLeft=useCallback(function(method,month){onPressArrowLeft==null?void 0:onPressArrowLeft(method,month);scrollPage(false);},[onPressArrowLeft,scrollPage]);var _onPressArrowRight=useCallback(function(method,month){onPressArrowRight==null?void 0:onPressArrowRight(method,month);scrollPage(true);},[onPressArrowRight,scrollPage]);var _onDayPress=useCallback(function(value){setDate==null?void 0:setDate(value.dateString,updateSources.DAY_PRESS);if(closeOnDayPress){setTimeout(function(){if(isOpen){bounceToPosition(closedHeight);}},0);}onDayPress==null?void 0:onDayPress(value);},[setDate,onDayPress,closeOnDayPress,isOpen]);var onVisibleMonthsChange=useCallback(throttle(function(value){if(first(value)){var _first;var month=(_first=first(value))==null?void 0:_first.month;if(month&&visibleMonth.current!==month){var _first2;visibleMonth.current=month;var year=(_first2=first(value))==null?void 0:_first2.year;if(year){visibleYear.current=year;}if(visibleMonth.current!==getMonth(date)){var next=isLaterDate(first(value),date);scrollPage(next);}setTimeout(function(){var _numberOfWeeks=getNumberOfWeeksInMonth(date);if(_numberOfWeeks!==numberOfWeeks.current){numberOfWeeks.current=_numberOfWeeks;openHeight.current=getOpenHeight();if(isOpen){bounceToPosition(openHeight.current);}}},0);}}},100,{trailing:true,leading:false}),[date,scrollPage]);var renderWeekDaysNames=function renderWeekDaysNames(){return _jsx(View,{style:weekDaysStyle,children:_jsx(WeekDaysNames,{firstDay:firstDay,style:style.current.dayHeader})});};var renderHeader=function renderHeader(){var monthYear=new XDate(date).toString('MMMM yyyy');return _jsxs(Animated.View,{ref:header,style:headerStyle,pointerEvents:'none',children:[_jsx(Text,{allowFontScaling:false,style:style.current.headerTitle,children:monthYear}),renderWeekDaysNames()]});};var renderWeekCalendar=function renderWeekCalendar(){var WeekComponent=disableWeekScroll?Week:WeekCalendar;var weekCalendarProps=disableWeekScroll?undefined:{allowShadow:false};return _jsx(Animated.View,{ref:weekCalendar,style:weekCalendarStyle,pointerEvents:position===Positions.CLOSED?'auto':'none',children:_jsx(WeekComponent,_objectSpread(_objectSpread(_objectSpread({},props),weekCalendarProps),{},{current:date,onDayPress:_onDayPress,style:calendarStyle,hideDayNames:true,accessibilityElementsHidden:true,importantForAccessibility:'no-hide-descendants'}))});};var renderKnob=function renderKnob(){return _jsx(View,{style:style.current.knobContainer,pointerEvents:'none',testID:testID+\"-knob\",children:_jsx(View,{style:style.current.knob,testID:CALENDAR_KNOB})});};var _renderArrow=function _renderArrow(direction){if(isFunction(renderArrow)){return renderArrow(direction);}return _jsx(Image,{source:direction==='right'?rightArrowImageSource:leftArrowImageSource,style:style.current.arrowImage,testID:testID+\"-\"+direction+\"-arrow\"});};return _jsx(View,{testID:testID,style:containerStyle,children:screenReaderEnabled?_jsx(Calendar,_objectSpread(_objectSpread({testID:\"calendar\"},others),{},{theme:themeObject,onDayPress:_onDayPress,hideExtraDays:true,renderArrow:_renderArrow})):_jsxs(Animated.View,_objectSpread(_objectSpread({ref:wrapper,style:wrapperStyle},panResponder.panHandlers),{},{children:[_jsx(CalendarList,_objectSpread(_objectSpread({testID:\"calendar\",horizontal:horizontal,firstDay:firstDay,calendarStyle:calendarStyle},others),{},{markedDates:_markedDates,theme:themeObject,ref:calendar,current:initialDate,onDayPress:_onDayPress,onVisibleMonthsChange:onVisibleMonthsChange,pagingEnabled:true,scrollEnabled:isOpen,hideArrows:shouldHideArrows,onPressArrowLeft:_onPressArrowLeft,onPressArrowRight:_onPressArrowRight,hideExtraDays:!horizontal&&isOpen,renderArrow:_renderArrow,staticHeader:true})),renderWeekCalendar(),!hideKnob&&renderKnob(),!horizontal&&renderHeader()]}))});};export default ExpandableCalendar;ExpandableCalendar.displayName='ExpandableCalendar';ExpandableCalendar.propTypes=_objectSpread(_objectSpread({},CalendarList.propTypes),{},{initialPosition:PropTypes.oneOf(values(Positions)),onCalendarToggled:PropTypes.func,disablePan:PropTypes.bool,hideKnob:PropTypes.bool,leftArrowImageSource:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.func]),rightArrowImageSource:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.func]),allowShadow:PropTypes.bool,disableWeekScroll:PropTypes.bool,openThreshold:PropTypes.number,closeThreshold:PropTypes.number,closeOnDayPress:PropTypes.bool});ExpandableCalendar.defaultProps={horizontal:true,initialPosition:Positions.CLOSED,firstDay:0,leftArrowImageSource:LEFT_ARROW,rightArrowImageSource:RIGHT_ARROW,allowShadow:true,openThreshold:PAN_GESTURE_THRESHOLD,closeThreshold:PAN_GESTURE_THRESHOLD,closeOnDayPress:true};ExpandableCalendar.positions=Positions;","map":{"version":3,"sources":["/Users/mikebaker/health_tracker/client/node_modules/react-native-calendars/src/expandableCalendar/index.js"],"names":["first","values","isFunction","isNumber","throttle","PropTypes","XDate","React","useContext","useRef","useState","useEffect","useCallback","useMemo","CALENDAR_KNOB","page","parseDate","toMarkingFormat","styleConstructor","HEADER_HEIGHT","KNOB_CONTAINER_HEIGHT","WeekDaysNames","Calendar","CalendarList","Week","WeekCalendar","Context","constants","commons","require","updateSources","UpdateSources","Positions","SPEED","BOUNCINESS","CLOSED_HEIGHT","WEEK_HEIGHT","DAY_NAMES_PADDING","PAN_GESTURE_THRESHOLD","LEFT_ARROW","RIGHT_ARROW","headerStyleOverride","stylesheet","calendar","header","week","marginTop","marginBottom","flexDirection","justifyContent","ExpandableCalendar","props","theme","horizontal","initialPosition","CLOSED","firstDay","disablePan","disableWeekScroll","openThreshold","closeThreshold","onCalendarToggled","closeOnDayPress","onDayPress","propsStyle","style","calendarStyle","allowShadow","hideKnob","hideArrows","onPressArrowLeft","onPressArrowRight","renderArrow","rightArrowImageSource","leftArrowImageSource","markedDates","testID","others","date","setDate","initialDate","getYear","d","getFullYear","getMonth","visibleMonth","visibleYear","isLaterDate","date1","date2","year","month","_markedDates","selected","getNumberOfWeeksInMonth","days","length","numberOfWeeks","closedHeight","getOpenHeight","Math","max","screenHeight","screenWidth","current","isAndroid","openHeight","startHeight","_height","deltaY","Animated","Value","headerDeltaY","position","setPosition","screenReaderEnabled","setScreenReaderEnabled","isOpen","OPEN","wrapper","weekCalendar","themeObject","_wrapperStyles","height","_headerStyles","top","_weekCalendarStyles","opacity","shouldHideArrows","updateNativeStyles","setNativeProps","weekDaysStyle","leftPaddings","paddingLeft","rightPaddings","paddingRight","weekDayNames","headerStyle","weekCalendarStyle","weekContainer","hidden","visible","containerStyle","containerShadow","wrapperStyle","AccessibilityInfo","isScreenReaderEnabled","then","handleScreenReaderStatus","fetch","scrollToDate","scrollToDay","scrollToMonth","scrollPage","next","addMonths","dayOfTheWeek","getDay","firstDayOfWeek","addDays","PAGE_SCROLL","handleMoveShouldSetPanResponder","_","gestureState","dy","handlePanResponderMove","min","handlePanResponderEnd","Number","bounceToPosition","panResponder","PanResponder","create","onMoveShouldSetPanResponder","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","toValue","threshold","_isOpen","newValue","setValue","spring","speed","bounciness","useNativeDriver","start","closeHeader","resetWeekCalendarOpacity","_onPressArrowLeft","method","_onPressArrowRight","_onDayPress","value","dateString","DAY_PRESS","setTimeout","onVisibleMonthsChange","_numberOfWeeks","trailing","leading","renderWeekDaysNames","dayHeader","renderHeader","monthYear","toString","headerTitle","renderWeekCalendar","WeekComponent","weekCalendarProps","undefined","renderKnob","knobContainer","knob","_renderArrow","direction","arrowImage","panHandlers","displayName","propTypes","oneOf","func","bool","oneOfType","object","number","defaultProps","positions"],"mappings":"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","sourcesContent":["import first from 'lodash/first';\nimport values from 'lodash/values';\nimport isFunction from 'lodash/isFunction';\nimport isNumber from 'lodash/isNumber';\nimport throttle from 'lodash/throttle';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { useContext, useRef, useState, useEffect, useCallback, useMemo } from 'react';\nimport { AccessibilityInfo, PanResponder, Animated, View, Text, Image } from 'react-native';\n// @ts-expect-error\nimport { CALENDAR_KNOB } from '../testIDs';\nimport { page } from '../dateutils';\nimport { parseDate, toMarkingFormat } from '../interface';\nimport styleConstructor, { HEADER_HEIGHT, KNOB_CONTAINER_HEIGHT } from './style';\nimport WeekDaysNames from '../commons/WeekDaysNames';\nimport Calendar from '../calendar';\nimport CalendarList from '../calendar-list';\nimport Week from './week';\nimport WeekCalendar from './WeekCalendar';\nimport Context from './Context';\nimport constants from '../commons/constants';\nconst commons = require('./commons');\nconst updateSources = commons.UpdateSources;\nvar Positions;\n(function (Positions) {\n    Positions[\"CLOSED\"] = \"closed\";\n    Positions[\"OPEN\"] = \"open\";\n})(Positions || (Positions = {}));\nconst SPEED = 20;\nconst BOUNCINESS = 6;\nconst CLOSED_HEIGHT = 120; // header + 1 week\nconst WEEK_HEIGHT = 46;\nconst DAY_NAMES_PADDING = 24;\nconst PAN_GESTURE_THRESHOLD = 30;\nconst LEFT_ARROW = require('../calendar/img/previous.png');\nconst RIGHT_ARROW = require('../calendar/img/next.png');\nconst headerStyleOverride = {\n    stylesheet: {\n        calendar: {\n            header: {\n                week: {\n                    marginTop: 7,\n                    marginBottom: -4,\n                    flexDirection: 'row',\n                    justifyContent: 'space-around'\n                }\n            }\n        }\n    }\n};\n/**\n * @description: Expandable calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst ExpandableCalendar = (props) => {\n    const { theme, horizontal = true, initialPosition = Positions.CLOSED, firstDay = 0, disablePan, disableWeekScroll, openThreshold = PAN_GESTURE_THRESHOLD, closeThreshold = PAN_GESTURE_THRESHOLD, onCalendarToggled, closeOnDayPress = true, onDayPress, style: propsStyle, calendarStyle, allowShadow = true, hideKnob, hideArrows, onPressArrowLeft, onPressArrowRight, renderArrow, rightArrowImageSource = RIGHT_ARROW, leftArrowImageSource = LEFT_ARROW, markedDates, testID, ...others } = props;\n    /** Date */\n    const { date, setDate } = useContext(Context);\n    const initialDate = date;\n    const getYear = (date) => {\n        const d = new XDate(date);\n        return d.getFullYear();\n    };\n    const getMonth = (date) => {\n        const d = new XDate(date);\n        return d.getMonth() + 1; // getMonth() returns month's index' (0-11)\n    };\n    const visibleMonth = useRef(getMonth(date));\n    const visibleYear = useRef(getYear(date));\n    const isLaterDate = (date1, date2) => {\n        if (date1 && date2) {\n            if (date1.year > getYear(date2)) {\n                return true;\n            }\n            if (date1.year === getYear(date2)) {\n                if (date1.month > getMonth(date2)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    const _markedDates = useMemo(() => {\n        return {\n            ...markedDates,\n            [date]: { selected: true }\n        };\n    }, [markedDates, date]);\n    /** Number of weeks */\n    const getNumberOfWeeksInMonth = (month) => {\n        const days = page(parseDate(month), firstDay);\n        return days.length / 7;\n    };\n    const numberOfWeeks = useRef(getNumberOfWeeksInMonth(date));\n    /** Position */\n    const closedHeight = CLOSED_HEIGHT + (hideKnob ? 0 : KNOB_CONTAINER_HEIGHT);\n    const getOpenHeight = () => {\n        if (!horizontal) {\n            return Math.max(constants.screenHeight, constants.screenWidth);\n        }\n        return CLOSED_HEIGHT + (WEEK_HEIGHT * (numberOfWeeks.current - 1)) + (hideKnob ? 12 : KNOB_CONTAINER_HEIGHT) + (constants.isAndroid ? 3 : 0);\n    };\n    const openHeight = useRef(getOpenHeight());\n    const startHeight = initialPosition === Positions.CLOSED ? closedHeight : openHeight.current;\n    const _height = useRef(startHeight);\n    const deltaY = useRef(new Animated.Value(startHeight));\n    const headerDeltaY = useRef(new Animated.Value(initialPosition === Positions.CLOSED ? 0 : -HEADER_HEIGHT));\n    const [position, setPosition] = useState(initialPosition || Positions.CLOSED);\n    const [screenReaderEnabled, setScreenReaderEnabled] = useState(false);\n    const isOpen = useMemo(() => {\n        return position === Positions.OPEN;\n    }, [position]);\n    /** Components' refs */\n    const wrapper = useRef();\n    const calendar = useRef();\n    const header = useRef();\n    const weekCalendar = useRef();\n    /** Styles */\n    const style = useRef(styleConstructor(theme));\n    const themeObject = Object.assign(headerStyleOverride, theme);\n    const _wrapperStyles = useRef({ style: { height: startHeight } });\n    const _headerStyles = { style: { top: initialPosition === Positions.CLOSED ? 0 : -HEADER_HEIGHT } };\n    const _weekCalendarStyles = { style: { opacity: isOpen ? 0 : 1 } };\n    const shouldHideArrows = !horizontal ? true : hideArrows || false;\n    const updateNativeStyles = () => {\n        wrapper?.current?.setNativeProps(_wrapperStyles.current);\n        if (!horizontal) {\n            header?.current?.setNativeProps(_headerStyles);\n        }\n        else {\n            weekCalendar?.current?.setNativeProps(_weekCalendarStyles);\n        }\n    };\n    const weekDaysStyle = useMemo(() => {\n        const leftPaddings = calendarStyle?.paddingLeft;\n        const rightPaddings = calendarStyle?.paddingRight;\n        return [\n            style.current.weekDayNames,\n            {\n                paddingLeft: isNumber(leftPaddings) ? leftPaddings + 6 : DAY_NAMES_PADDING,\n                paddingRight: isNumber(rightPaddings) ? rightPaddings + 6 : DAY_NAMES_PADDING\n            }\n        ];\n    }, [calendarStyle]);\n    const headerStyle = useMemo(() => {\n        return [style.current.header, { height: HEADER_HEIGHT + 10, top: headerDeltaY.current }];\n    }, [headerDeltaY.current]);\n    const weekCalendarStyle = useMemo(() => {\n        return [style.current.weekContainer, isOpen ? style.current.hidden : style.current.visible];\n    }, [isOpen]);\n    const containerStyle = useMemo(() => {\n        return [allowShadow && style.current.containerShadow, propsStyle];\n    }, [allowShadow, propsStyle]);\n    const wrapperStyle = useMemo(() => {\n        return { height: deltaY.current };\n    }, [deltaY.current]);\n    /** Effects */\n    useEffect(() => {\n        if (AccessibilityInfo) {\n            if (AccessibilityInfo.isScreenReaderEnabled) {\n                AccessibilityInfo.isScreenReaderEnabled().then(handleScreenReaderStatus);\n            }\n            else if (AccessibilityInfo.fetch) {\n                // Support for older RN versions\n                AccessibilityInfo.fetch().then(handleScreenReaderStatus);\n            }\n        }\n    }, []);\n    useEffect(() => {\n        // date was changed from AgendaList, arrows or scroll\n        scrollToDate(date);\n    }, [date]);\n    const handleScreenReaderStatus = (screenReaderEnabled) => {\n        setScreenReaderEnabled(screenReaderEnabled);\n    };\n    /** Scroll */\n    const scrollToDate = (date) => {\n        if (!horizontal) {\n            calendar?.current?.scrollToDay(new XDate(date), 0, true);\n        }\n        else if (getYear(date) !== visibleYear.current || getMonth(date) !== visibleMonth.current) {\n            // don't scroll if the month is already visible\n            calendar?.current?.scrollToMonth(date);\n        }\n    };\n    const scrollPage = (next) => {\n        if (horizontal) {\n            const d = parseDate(date);\n            if (isOpen) {\n                d.setDate(1);\n                d.addMonths(next ? 1 : -1);\n            }\n            else {\n                let dayOfTheWeek = d.getDay();\n                if (dayOfTheWeek < firstDay && firstDay > 0) {\n                    dayOfTheWeek = 7 + dayOfTheWeek;\n                }\n                const firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n                d.addDays(firstDayOfWeek);\n            }\n            setDate?.(toMarkingFormat(d), updateSources.PAGE_SCROLL);\n        }\n    };\n    /** Pan Gesture */\n    const handleMoveShouldSetPanResponder = (_, gestureState) => {\n        if (disablePan) {\n            return false;\n        }\n        if (!horizontal && isOpen) {\n            // disable pan detection when vertical calendar is open to allow calendar scroll\n            return false;\n        }\n        if (position === Positions.CLOSED && gestureState.dy < 0) {\n            // disable pan detection to limit to closed height\n            return false;\n        }\n        return gestureState.dy > 5 || gestureState.dy < -5;\n    };\n    const handlePanResponderMove = (_, gestureState) => {\n        // limit min height to closed height\n        _wrapperStyles.current.style.height = Math.max(closedHeight, _height.current + gestureState.dy);\n        if (!horizontal) {\n            // vertical CalenderList header\n            _headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -HEADER_HEIGHT), 0);\n        }\n        else {\n            // horizontal Week view\n            if (position === Positions.CLOSED) {\n                _weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n            }\n        }\n        updateNativeStyles();\n    };\n    const handlePanResponderEnd = () => {\n        _height.current = Number(_wrapperStyles.current.style.height);\n        bounceToPosition();\n    };\n    const panResponder = PanResponder.create({\n        onMoveShouldSetPanResponder: handleMoveShouldSetPanResponder,\n        onPanResponderMove: handlePanResponderMove,\n        onPanResponderRelease: handlePanResponderEnd,\n        onPanResponderTerminate: handlePanResponderEnd\n    });\n    /** Animated */\n    const bounceToPosition = (toValue = 0) => {\n        if (!disablePan) {\n            const threshold = isOpen ? openHeight.current - closeThreshold : closedHeight + openThreshold;\n            let _isOpen = _height.current >= threshold;\n            const newValue = _isOpen ? openHeight.current : closedHeight;\n            deltaY.current.setValue(_height.current); // set the start position for the animated value\n            _height.current = toValue || newValue;\n            _isOpen = _height.current >= threshold; // re-check after _height.current was set\n            Animated.spring(deltaY.current, {\n                toValue: _height.current,\n                speed: SPEED,\n                bounciness: BOUNCINESS,\n                useNativeDriver: false\n            }).start();\n            onCalendarToggled?.(_isOpen);\n            setPosition(() => _height.current === closedHeight ? Positions.CLOSED : Positions.OPEN);\n            closeHeader(_isOpen);\n            resetWeekCalendarOpacity(_isOpen);\n        }\n    };\n    const resetWeekCalendarOpacity = (isOpen) => {\n        _weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n        updateNativeStyles();\n    };\n    const closeHeader = (isOpen) => {\n        headerDeltaY.current.setValue(Number(_headerStyles.style.top)); // set the start position for the animated value\n        if (!horizontal && !isOpen) {\n            Animated.spring(headerDeltaY.current, {\n                toValue: 0,\n                speed: SPEED / 10,\n                bounciness: 1,\n                useNativeDriver: false\n            }).start();\n        }\n    };\n    /** Events */\n    const _onPressArrowLeft = useCallback((method, month) => {\n        onPressArrowLeft?.(method, month);\n        scrollPage(false);\n    }, [onPressArrowLeft, scrollPage]);\n    const _onPressArrowRight = useCallback((method, month) => {\n        onPressArrowRight?.(method, month);\n        scrollPage(true);\n    }, [onPressArrowRight, scrollPage]);\n    const _onDayPress = useCallback((value) => {\n        setDate?.(value.dateString, updateSources.DAY_PRESS);\n        if (closeOnDayPress) {\n            setTimeout(() => {\n                // to allows setDate to be completed\n                if (isOpen) {\n                    bounceToPosition(closedHeight);\n                }\n            }, 0);\n        }\n        onDayPress?.(value);\n    }, [setDate, onDayPress, closeOnDayPress, isOpen]);\n    const onVisibleMonthsChange = useCallback(throttle((value) => {\n        if (first(value)) {\n            const month = first(value)?.month;\n            if (month && visibleMonth.current !== month) {\n                visibleMonth.current = month;\n                const year = first(value)?.year;\n                if (year) {\n                    visibleYear.current = year;\n                }\n                // for horizontal scroll\n                if (visibleMonth.current !== getMonth(date)) {\n                    const next = isLaterDate(first(value), date);\n                    scrollPage(next);\n                }\n                // updating openHeight\n                setTimeout(() => {\n                    // to wait for setDate() call in horizontal scroll (scrollPage())\n                    const _numberOfWeeks = getNumberOfWeeksInMonth(date);\n                    if (_numberOfWeeks !== numberOfWeeks.current) {\n                        numberOfWeeks.current = _numberOfWeeks;\n                        openHeight.current = getOpenHeight();\n                        if (isOpen) {\n                            bounceToPosition(openHeight.current);\n                        }\n                    }\n                }, 0);\n            }\n        }\n    }, 100, { trailing: true, leading: false }), [date, scrollPage]);\n    /** Renders */\n    const renderWeekDaysNames = () => {\n        return (<View style={weekDaysStyle}>\n        <WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>\n      </View>);\n    };\n    const renderHeader = () => {\n        const monthYear = new XDate(date).toString('MMMM yyyy');\n        return (<Animated.View ref={header} style={headerStyle} pointerEvents={'none'}>\n        <Text allowFontScaling={false} style={style.current.headerTitle}>\n          {monthYear}\n        </Text>\n        {renderWeekDaysNames()}\n      </Animated.View>);\n    };\n    const renderWeekCalendar = () => {\n        const WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n        const weekCalendarProps = disableWeekScroll ? undefined : { allowShadow: false };\n        return (<Animated.View ref={weekCalendar} style={weekCalendarStyle} pointerEvents={position === Positions.CLOSED ? 'auto' : 'none'}>\n        <WeekComponent {...props} {...weekCalendarProps} current={date} onDayPress={_onDayPress} style={calendarStyle} hideDayNames={true} accessibilityElementsHidden // iOS\n         importantForAccessibility={'no-hide-descendants'} // Android\n        />\n      </Animated.View>);\n    };\n    const renderKnob = () => {\n        // TODO: turn to TouchableOpacity with onPress that closes it\n        return (<View style={style.current.knobContainer} pointerEvents={'none'} testID={`${testID}-knob`}>\n        <View style={style.current.knob} testID={CALENDAR_KNOB}/>\n      </View>);\n    };\n    const _renderArrow = (direction) => {\n        if (isFunction(renderArrow)) {\n            return renderArrow(direction);\n        }\n        return (<Image source={direction === 'right' ? rightArrowImageSource : leftArrowImageSource} style={style.current.arrowImage} testID={`${testID}-${direction}-arrow`}/>);\n    };\n    return (<View testID={testID} style={containerStyle}>\n      {screenReaderEnabled ? (<Calendar testID=\"calendar\" {...others} theme={themeObject} onDayPress={_onDayPress} hideExtraDays renderArrow={_renderArrow}/>) : (<Animated.View ref={wrapper} style={wrapperStyle} {...panResponder.panHandlers}>\n          <CalendarList testID=\"calendar\" horizontal={horizontal} firstDay={firstDay} calendarStyle={calendarStyle} {...others} markedDates={_markedDates} theme={themeObject} ref={calendar} current={initialDate} onDayPress={_onDayPress} onVisibleMonthsChange={onVisibleMonthsChange} pagingEnabled scrollEnabled={isOpen} hideArrows={shouldHideArrows} onPressArrowLeft={_onPressArrowLeft} onPressArrowRight={_onPressArrowRight} hideExtraDays={!horizontal && isOpen} renderArrow={_renderArrow} staticHeader/>\n          {renderWeekCalendar()}\n          {!hideKnob && renderKnob()}\n          {!horizontal && renderHeader()}\n        </Animated.View>)}\n    </View>);\n};\nexport default ExpandableCalendar;\nExpandableCalendar.displayName = 'ExpandableCalendar';\nExpandableCalendar.propTypes = {\n    ...CalendarList.propTypes,\n    initialPosition: PropTypes.oneOf(values(Positions)),\n    onCalendarToggled: PropTypes.func,\n    disablePan: PropTypes.bool,\n    hideKnob: PropTypes.bool,\n    leftArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n    rightArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n    allowShadow: PropTypes.bool,\n    disableWeekScroll: PropTypes.bool,\n    openThreshold: PropTypes.number,\n    closeThreshold: PropTypes.number,\n    closeOnDayPress: PropTypes.bool\n};\nExpandableCalendar.defaultProps = {\n    horizontal: true,\n    initialPosition: Positions.CLOSED,\n    firstDay: 0,\n    leftArrowImageSource: LEFT_ARROW,\n    rightArrowImageSource: RIGHT_ARROW,\n    allowShadow: true,\n    openThreshold: PAN_GESTURE_THRESHOLD,\n    closeThreshold: PAN_GESTURE_THRESHOLD,\n    closeOnDayPress: true\n};\nExpandableCalendar.positions = Positions;\n"]},"metadata":{},"sourceType":"module"}